<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Minecraft Server - Console</title>
    <th:block th:insert="~{fragments/common :: common-head}"></th:block>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link th:href="@{/css/servers.css}" rel="stylesheet">
    <link th:href="@{/css/console.css}" rel="stylesheet">
</head>
<body th:data-instance-id="${instanceId}">

<div class="page-transition-wrapper">
    <div class="notification-container" id="notification-container"></div>
    <div th:replace="~{fragments/common :: server-navbar(instanceId=${instanceId}, serverName=${instanceName}, activePage='console')}"></div>

    <div class="main-container">
        <div class="console-header">
            <div class="server-info">
                <i class="fas fa-server server-icon"></i>
                <h1 class="server-name" th:text="${instanceName}"></h1>
                <span class="status-tag"
                      id="server-status-tag"
                      th:text="${serverStatus.online ? 'Running' : 'Stopped'}"
                      th:classappend="${serverStatus.online ? 'status-running' : 'status-stopped'}"></span>
                <span class="version-tag" th:text="${instanceVersion}"></span>
            </div>
            <div class="server-actions">
                <button class="action-btn btn-start" id="start-server-btn" th:style="${serverStatus.online ? 'display: none;' : 'display: flex;'}">
                    <i class="fas fa-play"></i> Start
                </button>
                <button class="action-btn btn-restart" id="restart-server-btn" th:style="${serverStatus.online ? 'display: flex;' : 'display: none;'}">
                    <i class="fas fa-sync-alt"></i> Restart
                </button>
                <button class="action-btn btn-stop" id="stop-server-btn" th:style="${serverStatus.online ? 'display: flex;' : 'display: none;'}">
                    <i class="fas fa-stop"></i> Stop
                </button>
            </div>
        </div>

        <div class="console-wrapper">
            <div class="status-bar">
                <div class="status-group">
                    <div class="status-item">
                        <div class="status-dot" id="connection-dot"></div>
                        <span id="connection-status">Connecting...</span>
                    </div>
                    <div class="status-item">
                        <span>Lines: <span id="line-count">0</span></span>
                    </div>
                </div>
                <div class="status-group">
                    <div class="status-item">
                        <span>Server: <span id="server-status">Unknown</span></span>
                    </div>
                </div>
            </div>

            <div class="console-output" id="console-output"></div>

            <div class="console-input-container">
                <i class="fas fa-envelope input-icon"></i>
                <input class="command-input"
                       id="command-input"
                       maxlength="256"
                       placeholder="Enter command and press enter to send, use arrow keys to navigate historical commands"
                       type="text">
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/console.js}" defer></script>
<th:block th:insert="~{fragments/common :: common-scripts}"></th:block>

</body>
</html>
</html>
