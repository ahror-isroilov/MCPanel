<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:insert="~{fragments/common :: head(title='Minecraft Panel - Servers')}"></th:block>
    <link rel="stylesheet" th:href="@{/css/servers.css}">
</head>
<body>
<div th:replace="~{fragments/_icon :: sprite}"></div>
<div class="page-transition-wrapper">
    <div th:replace="~{fragments/common :: notifications}"></div>
    <div th:replace="~{fragments/common :: main-navbar(breadcrumbs=${breadcrumbs})}"></div>
    <div class="main-container">
        <div class="page-header">
            <div>
                <h1 class="page-title" th:text="'Welcome back, ' + ${username} + '!'"></h1>
                <p class="page-subtitle">You have <span th:text="${#lists.size(servers)}"></span> total servers. <span
                        id="online-server-count">0</span> are currently online.</p>
            </div>
            <div class="search-sort-container">
                <input id="search-bar" placeholder="Search by name..." type="text">
            </div>
        </div>

        <div class="server-grid" th:if="${!#lists.isEmpty(servers)}">
            <div class="server-card add-server-card">
                <a href="/servers/create">
                    <div class="card-header">+</div>
                    <div class="card-body">
                        <p>Add New Server</p>
                    </div>
                </a>
            </div>
        </div>

        <div class="empty-state" th:if="${#lists.isEmpty(servers)}">
            <div class="empty-state-icon">
                <i class="fas fa-server"></i>
            </div>
            <h2 class="empty-state-title">No Servers Yet!</h2>
            <p class="empty-state-description">It looks a bit empty here. Let's get your first Minecraft server up and
                running.</p>
            <a href="/servers/create" class="btn btn-primary">
                <i class="fas fa-plus"></i> Create Your First Server
            </a>
        </div>
    </div>
</div>

<div class="modal-overlay" id="delete-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Delete Server</h3>
            <button class="close-btn" id="close-delete-modal">
                <span th:replace="~{fragments/_icon :: icon(iconName='close', className='icon-medium')}"></span>
            </button>
        </div>
        <div class="modal-body">
            <div class="delete-warning">
                <svg fill="none" height="48" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" width="48">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" x2="12" y1="8" y2="12"></line>
                    <line x1="12" x2="12.01" y1="16" y2="16"></line>
                </svg>
                <p>Are you sure you want to delete the server <strong id="delete-server-name"></strong>?</p>
                <p class="warning-text">This action cannot be undone. All server files and data will be permanently
                    deleted.</p>
            </div>
            <div class="modal-actions">
                <button class="action-btn btn-danger-subtle" id="confirm-delete">Yes, Delete Server</button>
                <button class="action-btn btn-secondary" id="cancel-delete">Cancel</button>
            </div>
        </div>
    </div>
</div>

<script th:src="@{/js/servers.js}"></script>
<th:block th:insert="~{fragments/common :: common-scripts}"></th:block>
</body>
</html>